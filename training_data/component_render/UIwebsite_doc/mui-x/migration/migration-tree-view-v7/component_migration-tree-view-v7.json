{
  "name": "migration-tree-view-v7",
  "introduction": [
    "# Migration from v7 to v8\n\n<p class=\"description\">This guide describes the changes needed to migrate the Tree View from v7 to v8.</p>"
  ],
  "code_path": [
    null
  ],
  "children": [
    {
      "name": "Introduction",
      "introduction": [
        "Introduction\n\nThis is a reference guide for upgrading `@mui/x-tree-view` from v7 to v8."
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "Start using the new release",
      "introduction": [
        "Start using the new release\n\nIn `package.json`, change the version of the Tree View package to `next`.\n\n```diff\n-\"@mui/x-tree-view\": \"7.x.x\",\n+\"@mui/x-tree-view\": \"next\",\n\n-\"@mui/x-tree-view-pro\": \"7.x.x\",\n+\"@mui/x-tree-view-pro\": \"next\",\n```\n\nUsing `next` ensures that it will always use the latest v8 pre-release version, but you can also use a fixed version, like `8.0.0-alpha.0`.\n\nSince `v8` is a major release, it contains changes that affect the public API.\nThese changes were done for consistency, improved stability and to make room for new features.\nDescribed below are the steps needed to migrate from v7 to v8."
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "Run codemods",
      "introduction": [
        "Run codemods\n\nThe `preset-safe` codemod will automatically adjust the bulk of your code to account for breaking changes in v8. You can run `v8.0.0/tree-view/preset-safe` targeting only Tree View or `v8.0.0/preset-safe` to target the other packages as well.\n\nYou can either run it on a specific file, folder, or your entire codebase when choosing the `<path>` argument.\n\n<!-- #default-branch-switch -->\n\n```bash\n# Tree View specific\nnpx @mui/x-codemod@latest v8.0.0/tree-view/preset-safe <path>\n\n# Target the other packages as well\nnpx @mui/x-codemod@latest v8.0.0/preset-safe <path>\n```\n\n:::info\nIf you want to run the transformers one by one, check out the transformers included in the [preset-safe codemod for the Tree View](https://github.com/mui/mui-x/blob/HEAD/packages/x-codemod/README.md#preset-safe-for-tree-view-v800) for more details.\n:::\n\nBreaking changes that are handled by this codemod are denoted by a ✅ emoji in the table of contents on the right side of the screen.\n\nIf you have already applied the `v8.0.0/tree-view/preset-safe` (or `v8.0.0/preset-safe`) codemod, then you should not need to take any further action on these items.\n\nAll other changes must be handled manually.\n\n:::warning\nNot all use cases are covered by codemods. In some scenarios, like props spreading, cross-file dependencies, etc., the changes are not properly identified and therefore must be handled manually.\n\nFor example, if a codemod tries to rename a prop, but this prop is hidden with the spread operator, it won't be transformed as expected.\n\n```tsx\n<RichTreeView {...treeViewProps} />\n```\n\nAfter running the codemods, make sure to test your application and that you don't have any console errors.\n\nFeel free to [open an issue](https://github.com/mui/mui-x/issues/new/choose) for support if you need help to proceed with your migration.\n:::"
      ],
      "code_path": [
        null
      ],
      "children": [
        {
          "name": "✅ Use Simple Tree View instead of Tree View",
          "introduction": [
            "✅ Use Simple Tree View instead of Tree View\n\nThe `<TreeView />` component has been renamed `<SimpleTreeView />` which has exactly the same API:\n\n```diff\n-import { TreeView } from '@mui/x-tree-view';\n+import { SimpleTreeView } from '@mui/x-tree-view';\n\n-import { TreeView } from '@mui/x-tree-view/TreeView';\n+import { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView';\n\n   return (\n-    <TreeView>\n+    <SimpleTreeView>\n       <TreeItem itemId=\"1\" label=\"First item\" />\n-    </TreeView>\n+    </SimpleTreeView>\n   );\n```\n\nIf you were using theme augmentation, you will also need to migrate it:\n\n```diff\n const theme = createTheme({\n   components: {\n-    MuiTreeView: {\n+    MuiSimpleTreeView: {\n       styleOverrides: {\n         root: {\n           opacity: 0.5,\n         },\n       },\n     },\n   },\n });\n```\n\nIf you were using the `treeViewClasses` object, you can replace it with the new `simpleTreeViewClasses` object:\n\n```diff\n import { treeViewClasses } from '@mui/x-tree-view/TreeView';\n import { simpleTreeViewClasses } from '@mui/x-tree-view/SimpleTreeView';\n\n-const rootClass = treeViewClasses.root;\n+const rootClass = simpleTreeViewClasses.root;\n```"
          ],
          "code_path": [
            null
          ],
          "children": []
        }
      ]
    },
    {
      "name": "New API to customize the Tree Item",
      "introduction": [
        "New API to customize the Tree Item\n\nThe `ContentComponent` or `ContentProps` props of the `TreeItem` component have been removed in favor of the new `slots`, `slotProps` props and of the `useTreeItem` hook.\n\nLearn more about the anatomy of the Tree Items and the customization utilities provided on the [Tree Item Customization page](/x/react-tree-view/tree-item-customization/)."
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "Behavior change on the `onClick` and `onMouseDown` props of `TreeItem`",
      "introduction": [
        "Behavior change on the `onClick` and `onMouseDown` props of `TreeItem`\n\nThe `onClick` and `onMouseDown` were the only event callback that were passed to the content of the Tree Item instead of its root.\nThe goal was to make sure that the callback was not fired when clicking on a descendant of a giving item.\nThis inconsistency has been solved, all the event manager now target the root of the item, and you can use the `onItemClick` prop on the Tree View component to target the content of an item:\n\n```diff\n-<SimpleTreeView>\n-  <TreeItem onClick={handleItemClick}>\n+<SimpleTreeView onItemClick={handleItemClick}>\n+  <TreeItem>\n </SimpleTreeView>\n```"
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "✅ Rename the `TreeItem2` (and related utils)",
      "introduction": [
        "✅ Rename the `TreeItem2` (and related utils)\n\nAll the new Tree Item-related components and utils (introduced in the previous major to improve the DX of the Tree Item component) are becoming the default way of using the Tree Item and are therefore losing their `2` suffix:\n\n```diff\n import * as React from 'react';\n import {\n-  TreeItem2,\n+  TreeItem,\n-  TreeItem2Root,\n+  TreeItemRoot,\n-  TreeItem2Content,\n+  TreeItemContent,\n-  TreeItem2IconContainer,\n+  TreeItemIconContainer,\n-  TreeItem2GroupTransition,\n+  TreeItemGroupTransition,\n-  TreeItem2Checkbox,\n+  TreeItemCheckbox,\n-  TreeItem2Label,\n+  TreeItemLabel,\n-  TreeItem2Props,\n+  TreeItemProps,\n-  TreeItem2Slots,\n+  TreeItemSlots,\n-  TreeItem2SlotProps,\n+  TreeItemSlotProps,\n- } from '@mui/x-tree-view/TreeItem2';\n+ } from '@mui/x-tree-view/TreeItem';\n import {\n-  useTreeItem2,\n+  useTreeItem,\n-  unstable_useTreeItem2 as useAliasedTreeItem,\n+  unstable_useTreeItem as useAliasedTreeItem,\n-  UseTreeItem2Parameters,\n+  UseTreeItemParameters,\n-  UseTreeItem2ReturnValue,\n+  UseTreeItemReturnValue,\n-  UseTreeItem2Status,\n+  UseTreeItemStatus,\n-  UseTreeItem2RootSlotOwnProps,\n+  UseTreeItemRootSlotOwnProps,\n-  UseTreeItem2ContentSlotOwnProps,\n+  UseTreeItemContentSlotOwnProps,\n-  UseTreeItem2LabelInputSlotOwnProps,\n+  UseTreeItemLabelInputSlotOwnProps,\n-  UseTreeItem2LabelSlotOwnProps,\n+  UseTreeItemLabelSlotOwnProps,\n-  UseTreeItem2CheckboxSlotOwnProps,\n+  UseTreeItemCheckboxSlotOwnProps,\n-  UseTreeItem2IconContainerSlotOwnProps,\n+  UseTreeItemIconContainerSlotOwnProps,\n-  UseTreeItem2GroupTransitionSlotOwnProps,\n+  UseTreeItemGroupTransitionSlotOwnProps,\n-  UseTreeItem2DragAndDropOverlaySlotOwnProps,\n+  UseTreeItemDragAndDropOverlaySlotOwnProps,\n- } from '@mui/x-tree-view/useTreeItem2';\n+ } from '@mui/x-tree-view/useTreeItem';\n- import { useTreeItem2Utils } from '@mui/x-tree-view/hooks';\n+ import { useTreeItemUtils } from '@mui/x-tree-view/hooks';\n import {\n-  TreeItem2Provider,\n+  TreeItemProvider,\n-  TreeItem2ProviderProps,\n+  TreeItemProviderProps,\n- } from '@mui/x-tree-view/TreeItem2Provider';\n+ } from '@mui/x-tree-view/TreeItemProvider';\n import {\n-  TreeItem2Icon,\n+  TreeItemIcon,\n-  TreeItem2IconProps,\n+  TreeItemIconProps,\n-  TreeItem2IconSlots,\n+  TreeItemIconSlots,\n-  TreeItem2IconSlotProps,\n+  TreeItemIconSlotProps,\n- } from '@mui/x-tree-view/TreeItem2Icon';\n+ } from '@mui/x-tree-view/TreeItemIcon';\n import {\n-  TreeItem2DragAndDropOverlay,\n+  TreeItemDragAndDropOverlay,\n-  TreeItem2DragAndDropOverlayProps,\n+  TreeItemDragAndDropOverlayProps,\n- } from '@mui/x-tree-view/TreeItem2DragAndDropOverlay';\n+ } from '@mui/x-tree-view/TreeItemDragAndDropOverlay';\n import {\n-  TreeItem2LabelInput,\n+  TreeItemLabelInput,\n-  TreeItem2LabelInputProps,\n+  TreeItemLabelInputProps,\n- } from '@mui/x-tree-view/TreeItem2LabelInput';\n+ } from '@mui/x-tree-view/TreeItemLabelInput';\n```"
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "Stop using `publicAPI` methods in the render",
      "introduction": [
        "Stop using `publicAPI` methods in the render\n\nThe Tree Items are now memoized to improve the performances of the Tree View components.\nIf you call a `publicAPI` method in the render of an item, it might not re-render and you might not have the new value.\n\n```ts\nfunction CustomTreeItem(props) {\n  const { publicAPI } = useTreeItemUtils();\n\n  // Invalid\n  console.log(publicAPI.getItem(props.itemId));\n\n  // Valid\n  React.useEffect(() => {\n    console.log(publicAPI.getItem(props.itemId));\n  });\n\n  // Valid\n  function handleItemClick() {\n    console.log(publicAPI.getItem(props.itemId));\n  }\n}\n```\n\nIf you need to access the tree item model inside the render, you can use the new `useTreeItemModel` hook:\n\n```diff\n+import { useTreeItemModel } from '@mui/x-tree-view/hooks';\n\n function CustomTreeItem(props) {\n-  const { publicAPI } = useTreeItemUtils();\n-  const item = publicAPI.getItem(props.itemId);\n+  const item = useTreeItemModel(props.itemId);\n }\n```\n\n:::success\nIf you were using `publicAPI` methods to access other information than the tree item model inside the render, please open an issue so that we can provide a way to do it.\n:::"
      ],
      "code_path": [
        null
      ],
      "children": []
    },
    {
      "name": "Apply the indentation on the item content instead of it's parent's group",
      "introduction": [
        "Apply the indentation on the item content instead of it's parent's group\n\nThe indentation of nested Tree Items is now applied on the content of the element.\nThis is required to support features like the drag and drop re-ordering which requires every Tree Item to go to the far left of the Tree View."
      ],
      "code_path": [
        null
      ],
      "children": [
        {
          "name": "Apply custom indentation",
          "introduction": [
            "Apply custom indentation\n\nIf you used to set custom indentation in your Tree Item, you can use the new `itemChildrenIndentation` prop to do it while supporting the new DOM structure:\n\n```tsx\n<RichTreeView\n  items={MUI_X_PRODUCTS}\n  itemChildrenIndentation={24}\n  defaultExpandedItems={['grid']}\n/>\n```\n\n:::info\nSee [Tree Item Customization—Change nested item's indentation](/x/react-tree-view/tree-item-customization/#change-nested-items-indentation) for more details.\n:::"
          ],
          "code_path": [
            null
          ],
          "children": []
        },
        {
          "name": "Fallback to the old behavior",
          "introduction": [
            "Fallback to the old behavior\n\nIf you used to style your content element (for example to add a border to it) and you don't use the drag and drop re-ordering, you can manually put the padding on the group transition element to restore the previous behavior:\n\n```tsx\nconst CustomTreeItemContent = styled(TreeItemContent)(({ theme }) => ({\n  // Remove the additional padding of nested elements\n  padding: theme.spacing(0.5, 1),\n}));\n\nconst CustomTreeItemGroupTransition = styled(TreeItemGroupTransition)({\n  // Add the padding back on the group transition element\n  paddingLeft: 'var(--TreeView-itemChildrenIndentation) !important',\n});\n```"
          ],
          "code_path": [
            null
          ],
          "children": []
        }
      ]
    }
  ]
}